const fs = require('fs');
const path = require('path');

// Map course directories to their image filenames
const courseImages = {
  'course-1-movement-medicine': 'course-1--movement-medicine.jpg',
  'course-4-growth-mindset': 'course-4--growth-mindset.jpg',
  'course-5-cbt-fundamentals': 'course-5--cbt-fundamentals.jpg',
  'course-6-stress-challenge-navigation': 'course-6--stress-challenge-navigation.jpg',
  'course-7-boundaries-bootcamp': 'course-7--boundaries-bootcamp.jpg',
  'course-8-social-circle-mastery': 'course-8--social-circle-mastery.jpg',
  'course-9-team-sports-mental-health': 'course-9--team-sports-mental-health.jpg',
  'course-10-relationship-dynamics': 'course-10--relationship-dynamics.jpg',
  'course-11-family-parenting-mental-health': 'course-11--family-parenting-mental-health.jpg',
  'course-12-purpose-and-responsibility': 'course-12--purpose-and-responsibility.jpg',
  'course-13-mental-health-first-aid': 'course-13--mental-health-first-aid.jpg',
  'course-14-coaching-mentoring': 'course-14--coaching-mentoring.jpg',
  'course-15-legacy-building': 'course-15--legacy-building.jpg',
  'course-16-recreational-therapy': 'course-16--recreational-therapy.jpg',
  'course-17-creative-expression': 'course-17--creative-expression.jpg',
  'course-18-adventure-outdoor-mental-health': 'course-18--adventure-outdoor-mental-health.jpg',
  'course-19-music-movement-wellness': 'course-19--music-movement-wellness.jpg'
};

const basePath = '/Users/mike/github/rps-digital-wellness-platform/github-deployment';

Object.keys(courseImages).forEach(courseDir => {
  const indexPath = path.join(basePath, courseDir, 'index.html');

  if (!fs.existsSync(indexPath)) {
    console.log(`⚠ Skipping ${courseDir} - index.html not found`);
    return;
  }

  let html = fs.readFileSync(indexPath, 'utf8');

  // Replace the old image path pattern
  // Old: course-images/Course X - Title.jpg
  // New: course-X--slug.jpg
  const oldPattern = /course-images\/[^"]+\.jpg/g;
  html = html.replace(oldPattern, courseImages[courseDir]);

  fs.writeFileSync(indexPath, html);
  console.log(`✓ Updated ${courseDir} -> ${courseImages[courseDir]}`);
});

console.log('\n✅ All image paths updated!');
